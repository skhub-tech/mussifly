{"version":3,"sources":["../src/ai/index.ts","../src/client.ts","../src/email/index.ts","../src/index.ts"],"names":["createOpenAICompatible","generateText","streamText"],"mappings":";;;;;;AAUO,IAAM,QAAN,MAAY;AAAA,EACT,QAAA;AAAA,EACA,MAAA;AAAA,EAER,YAAY,MAAA,EAAmB;AAC7B,IAAA,IAAA,CAAK,MAAA,GAAS,MAAA;AACd,IAAA,IAAA,CAAK,WAAWA,uCAAA,CAAuB;AAAA,MACrC,IAAA,EAAM,aAAA;AAAA,MACN,OAAA,EAAS,oCAAA;AAAA,MACT,OAAA,EAAS;AAAA,QACP,eAAA,EAAiB,CAAA,OAAA,EAAU,MAAA,CAAO,eAAe,CAAA;AAAA;AACnD,KACD,CAAA;AAAA,EACH;AAAA,EAEQ,SAAS,SAAA,EAAoB;AACnC,IAAA,OAAO,IAAA,CAAK,QAAA,CAAS,SAAA,IAAa,OAAO,CAAA;AAAA,EAC3C;AAAA,EAEQ,YAAY,QAAA,EAA0D;AAC5E,IAAA,OAAO,QAAA,CAAS,IAAI,CAAA,GAAA,MAAQ;AAAA,MAC1B,MAAM,GAAA,CAAI,IAAA;AAAA,MACV,SAAS,GAAA,CAAI;AAAA,KACf,CAAE,CAAA;AAAA,EACJ;AAAA,EAEA,MAAM,UAAA,CACJ,OAAA,EACA,QAAA,EAC4C;AAC5C,IAAA,IAAI,IAAA,CAAK,OAAO,KAAA,EAAO;AACrB,MAAA,OAAA,CAAQ,IAAI,8BAAA,EAAgC,EAAE,KAAA,EAAO,OAAA,CAAQ,OAAO,CAAA;AAAA,IACtE;AAEA,IAAA,IAAI;AACF,MAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,QAAA,CAAS,OAAA,CAAQ,KAAK,CAAA;AACzC,MAAA,MAAM,QAAA,GAAW,IAAA,CAAK,WAAA,CAAY,OAAA,CAAQ,QAAQ,CAAA;AAElD,MAAA,MAAM,MAAA,GAAS,MAAMC,eAAA,CAAa;AAAA,QAChC,KAAA;AAAA,QACA,QAAA;AAAA,QACA,aAAa,OAAA,CAAQ,WAAA;AAAA,QACrB,iBAAiB,OAAA,CAAQ;AAAA,OAC1B,CAAA;AAED,MAAA,MAAM,YAAA,GAAqC;AAAA,QACzC,EAAA,EAAI,CAAA,IAAA,EAAO,IAAA,CAAK,GAAA,EAAK,CAAA,CAAA;AAAA,QACrB,SAAS,CAAC;AAAA,UACR,OAAA,EAAS;AAAA,YACP,IAAA,EAAM,WAAA;AAAA,YACN,SAAS,MAAA,CAAO;AAAA,WAClB;AAAA,UACA,YAAA,EAAc,OAAO,YAAA,IAAgB;AAAA,SACtC,CAAA;AAAA,QACD,KAAA,EAAO;AAAA,UACL,YAAA,EAAc,MAAA,CAAO,KAAA,EAAO,WAAA,IAAe,CAAA;AAAA,UAC3C,gBAAA,EAAkB,MAAA,CAAO,KAAA,EAAO,YAAA,IAAgB,CAAA;AAAA,UAChD,WAAA,EAAa,MAAA,CAAO,KAAA,EAAO,WAAA,IAAe;AAAA;AAC5C,OACF;AAEA,MAAA,IAAI,IAAA,CAAK,OAAO,KAAA,EAAO;AACrB,QAAA,OAAA,CAAQ,IAAI,gCAAA,EAAkC;AAAA,UAC5C,UAAA,EAAY,aAAa,KAAA,CAAM;AAAA,SAChC,CAAA;AAAA,MACH;AAEA,MAAA,OAAO;AAAA,QACL,OAAA,EAAS,IAAA;AAAA,QACT,IAAA,EAAM;AAAA,OACR;AAAA,IACF,SAAS,KAAA,EAAY;AACnB,MAAA,IAAI,IAAA,CAAK,OAAO,KAAA,EAAO;AACrB,QAAA,OAAA,CAAQ,MAAM,4BAAA,EAA8B,EAAE,KAAA,EAAO,KAAA,CAAM,SAAS,CAAA;AAAA,MACtE;AAEA,MAAA,OAAO;AAAA,QACL,OAAA,EAAS,KAAA;AAAA,QACT,KAAA,EAAO,MAAM,OAAA,IAAW;AAAA,OAC1B;AAAA,IACF;AAAA,EACF;AAAA,EAEA,MAAM,gBAAA,CACJ,OAAA,EACA,OAAA,EACA,QAAA,EAC4C;AAC5C,IAAA,IAAI,IAAA,CAAK,OAAO,KAAA,EAAO;AACrB,MAAA,OAAA,CAAQ,IAAI,wCAAA,EAA0C,EAAE,KAAA,EAAO,OAAA,CAAQ,OAAO,CAAA;AAAA,IAChF;AAEA,IAAA,IAAI;AACF,MAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,QAAA,CAAS,OAAA,CAAQ,KAAK,CAAA;AACzC,MAAA,MAAM,QAAA,GAAW,IAAA,CAAK,WAAA,CAAY,OAAA,CAAQ,QAAQ,CAAA;AAElD,MAAA,MAAM,MAAA,GAAS,MAAMC,aAAA,CAAW;AAAA,QAC9B,KAAA;AAAA,QACA,QAAA;AAAA,QACA,aAAa,OAAA,CAAQ,WAAA;AAAA,QACrB,iBAAiB,OAAA,CAAQ;AAAA,OAC1B,CAAA;AAED,MAAA,IAAI,YAAA,GAAe,EAAA;AAEnB,MAAA,WAAA,MAAiB,KAAA,IAAS,OAAO,UAAA,EAAY;AAC3C,QAAA,YAAA,IAAgB,KAAA;AAChB,QAAA,OAAA,CAAQ,KAAK,CAAA;AAAA,MACf;AAGA,MAAA,MAAM,KAAA,GAAQ,MAAM,MAAA,CAAO,KAAA;AAE3B,MAAA,MAAM,YAAA,GAAqC;AAAA,QACzC,EAAA,EAAI,CAAA,WAAA,EAAc,IAAA,CAAK,GAAA,EAAK,CAAA,CAAA;AAAA,QAC5B,SAAS,CAAC;AAAA,UACR,OAAA,EAAS;AAAA,YACP,IAAA,EAAM,WAAA;AAAA,YACN,OAAA,EAAS;AAAA,WACX;AAAA,UACA,YAAA,EAAc;AAAA,SACf,CAAA;AAAA,QACD,KAAA,EAAO;AAAA,UACL,YAAA,EAAc,OAAO,WAAA,IAAe,CAAA;AAAA,UACpC,gBAAA,EAAkB,OAAO,YAAA,IAAgB,CAAA;AAAA,UACzC,WAAA,EAAa,OAAO,WAAA,IAAe;AAAA;AACrC,OACF;AAEA,MAAA,IAAI,IAAA,CAAK,OAAO,KAAA,EAAO;AACrB,QAAA,OAAA,CAAQ,IAAI,0CAAA,EAA4C;AAAA,UACtD,UAAA,EAAY,aAAa,KAAA,CAAM;AAAA,SAChC,CAAA;AAAA,MACH;AAEA,MAAA,OAAO;AAAA,QACL,OAAA,EAAS,IAAA;AAAA,QACT,IAAA,EAAM;AAAA,OACR;AAAA,IACF,SAAS,KAAA,EAAY;AACnB,MAAA,IAAI,IAAA,CAAK,OAAO,KAAA,EAAO;AACrB,QAAA,OAAA,CAAQ,MAAM,sCAAA,EAAwC,EAAE,KAAA,EAAO,KAAA,CAAM,SAAS,CAAA;AAAA,MAChF;AAEA,MAAA,OAAO;AAAA,QACL,OAAA,EAAS,KAAA;AAAA,QACT,KAAA,EAAO,MAAM,OAAA,IAAW;AAAA,OAC1B;AAAA,IACF;AAAA,EACF;AAAA,EAEA,MAAM,UAAA,CACJ,KAAA,EACA,QAAA,EAC8D;AAC9D,IAAA,IAAI,IAAA,CAAK,OAAO,KAAA,EAAO;AACrB,MAAA,OAAA,CAAQ,GAAA,CAAI,2BAAA,EAA6B,EAAE,UAAA,EAAY,KAAA,CAAM,OAAA,CAAQ,KAAK,CAAA,GAAI,KAAA,CAAM,MAAA,GAAS,CAAA,EAAG,CAAA;AAAA,IAClG;AAIA,IAAA,OAAO;AAAA,MACL,OAAA,EAAS,KAAA;AAAA,MACT,KAAA,EAAO;AAAA,KACT;AAAA,EACF;AAAA;AAAA,EAGA,WAAA,GAAc;AACZ,IAAA,OAAO,IAAA,CAAK,QAAA;AAAA,EACd;AACF;;;ACnLO,IAAM,YAAN,MAAgB;AAAA,EACX,MAAA;AAAA,EAEV,YAAY,MAAA,EAAmB;AAC7B,IAAA,IAAA,CAAK,MAAA,GAAS;AAAA,MACZ,iBAAiB,MAAA,CAAO,eAAA;AAAA,MACxB,KAAA,EAAO,OAAO,KAAA,IAAS;AAAA,KACzB;AAAA,EACF;AAAA,EAEA,MAAgB,OAAA,CACd,QAAA,EACA,MAAA,EACA,MACA,OAAA,EACyB;AACzB,IAAA,MAAM,GAAA,GAAM,8BAA8B,QAAQ,CAAA,CAAA;AAClD,IAAA,MAAM,OAAA,GAAkC;AAAA,MACtC,eAAA,EAAiB,CAAA,OAAA,EAAU,IAAA,CAAK,MAAA,CAAO,eAAe,CAAA,CAAA;AAAA,MACtD,cAAA,EAAgB,kBAAA;AAAA,MAChB,eAAA,EAAiB;AAAA,KACnB;AAEA,IAAA,MAAM,YAAA,GAA4B;AAAA,MAChC,MAAA;AAAA,MACA,OAAA;AAAA,MACA,IAAA,EAAM,IAAA,GAAO,IAAA,CAAK,SAAA,CAAU,IAAI,CAAA,GAAI;AAAA,KACtC;AAGA,IAAA,MAAM,UAAA,GAAa,IAAI,eAAA,EAAgB;AACvC,IAAA,MAAM,OAAA,GAAU,SAAS,OAAA,IAAW,GAAA;AACpC,IAAA,MAAM,YAAY,UAAA,CAAW,MAAM,UAAA,CAAW,KAAA,IAAS,OAAO,CAAA;AAC9D,IAAA,YAAA,CAAa,SAAS,UAAA,CAAW,MAAA;AAEjC,IAAA,IAAI;AACF,MAAA,MAAM,QAAA,GAAW,MAAM,KAAA,CAAM,GAAA,EAAK,YAAY,CAAA;AAC9C,MAAA,YAAA,CAAa,SAAS,CAAA;AAEtB,MAAA,MAAM,YAAA,GAAe,MAAM,QAAA,CAAS,IAAA,GAAO,KAAA,CAAM,OAAO,EAAC,CAAE,CAAA;AAE3D,MAAA,IAAI,SAAS,EAAA,EAAI;AACf,QAAA,OAAO;AAAA,UACL,OAAA,EAAS,IAAA;AAAA,UACT,IAAA,EAAM,YAAA;AAAA,UACN,OAAO,YAAA,EAAc;AAAA,SACvB;AAAA,MACF,CAAA,MAAO;AACL,QAAA,MAAM,KAAA,GAAQ,YAAA,EAAc,KAAA,IAAS,CAAA,2BAAA,EAA8B,SAAS,MAAM,CAAA,CAAA;AAElF,QAAA,IAAI,IAAA,CAAK,OAAO,KAAA,EAAO;AACrB,UAAA,OAAA,CAAQ,KAAA,CAAM,CAAA,eAAA,EAAkB,KAAK,CAAA,CAAA,EAAI;AAAA,YACvC,QAAA;AAAA,YACA,QAAQ,QAAA,CAAS,MAAA;AAAA,YACjB,IAAA,EAAM;AAAA,WACP,CAAA;AAAA,QACH;AAEA,QAAA,OAAO;AAAA,UACL,OAAA,EAAS,KAAA;AAAA,UACT;AAAA,SACF;AAAA,MACF;AAAA,IACF,SAAS,KAAA,EAAY;AACnB,MAAA,YAAA,CAAa,SAAS,CAAA;AACtB,MAAA,MAAM,eAAe,KAAA,CAAM,IAAA,KAAS,YAAA,GAAe,iBAAA,GAAoB,MAAM,OAAA,IAAW,wBAAA;AAExF,MAAA,IAAI,IAAA,CAAK,OAAO,KAAA,EAAO;AACrB,QAAA,OAAA,CAAQ,KAAA,CAAM,CAAA,wBAAA,EAA2B,YAAY,CAAA,CAAA,EAAI;AAAA,UACvD,QAAA;AAAA,UACA;AAAA,SACD,CAAA;AAAA,MACH;AAEA,MAAA,IAAI,OAAA,EAAS,OAAA,IAAW,OAAA,CAAQ,OAAA,GAAU,CAAA,EAAG;AAC3C,QAAA,IAAI,IAAA,CAAK,OAAO,KAAA,EAAO;AACrB,UAAA,OAAA,CAAQ,GAAA,CAAI,CAAA,qBAAA,EAAwB,OAAA,CAAQ,OAAO,CAAA,cAAA,CAAgB,CAAA;AAAA,QACrE;AAEA,QAAA,MAAM,IAAI,OAAA,CAAQ,CAAA,OAAA,KAAW,UAAA,CAAW,OAAA,EAAS,GAAI,CAAC,CAAA;AACtD,QAAA,OAAO,IAAA,CAAK,OAAA,CAAQ,QAAA,EAAU,MAAA,EAAQ,IAAA,EAAM;AAAA,UAC1C,GAAG,OAAA;AAAA,UACH,OAAA,EAAS,QAAQ,OAAA,GAAU;AAAA,SAC5B,CAAA;AAAA,MACH;AAEA,MAAA,OAAO;AAAA,QACL,OAAA,EAAS,KAAA;AAAA,QACT,KAAA,EAAO;AAAA,OACT;AAAA,IACF;AAAA,EACF;AAAA,EAEU,GAAA,CAAI,SAAiB,IAAA,EAAY;AACzC,IAAA,IAAI,IAAA,CAAK,OAAO,KAAA,EAAO;AACrB,MAAA,OAAA,CAAQ,GAAA,CAAI,CAAA,MAAA,EAAS,OAAO,CAAA,CAAA,EAAI,QAAQ,EAAE,CAAA;AAAA,IAC5C;AAAA,EACF;AACF,CAAA;;;AC5FO,IAAM,QAAA,GAAN,cAAuB,SAAA,CAAU;AAAA,EACtC,MAAM,IAAA,CACJ,KAAA,EACA,OAAA,EACqC;AACrC,IAAA,IAAA,CAAK,IAAI,eAAA,EAAiB;AAAA,MACxB,IAAI,KAAA,CAAM,EAAA;AAAA,MACV,SAAS,KAAA,CAAM;AAAA,KAChB,CAAA;AAED,IAAA,MAAM,OAAA,GAAU;AAAA,MACd,EAAA,EAAI,KAAA,CAAM,OAAA,CAAQ,KAAA,CAAM,EAAE,IAAI,KAAA,CAAM,EAAA,GAAK,CAAC,KAAA,CAAM,EAAE,CAAA;AAAA,MAClD,IAAA,EAAM,MAAM,IAAA,IAAQ,gBAAA;AAAA,MACpB,SAAS,KAAA,CAAM,OAAA;AAAA,MACf,MAAM,KAAA,CAAM,IAAA;AAAA,MACZ,MAAM,KAAA,CAAM,IAAA;AAAA,MACZ,aAAa,KAAA,CAAM,WAAA;AAAA,MACnB,SAAS,KAAA,CAAM,OAAA;AAAA,MACf,EAAA,EAAI,KAAA,CAAM,EAAA,GAAM,KAAA,CAAM,OAAA,CAAQ,KAAA,CAAM,EAAE,CAAA,GAAI,KAAA,CAAM,EAAA,GAAK,CAAC,KAAA,CAAM,EAAE,CAAA,GAAK,MAAA;AAAA,MACnE,GAAA,EAAK,KAAA,CAAM,GAAA,GAAO,KAAA,CAAM,OAAA,CAAQ,KAAA,CAAM,GAAG,CAAA,GAAI,KAAA,CAAM,GAAA,GAAM,CAAC,KAAA,CAAM,GAAG,CAAA,GAAK;AAAA,KAC1E;AAEA,IAAA,MAAM,QAAA,GAAW,MAAM,IAAA,CAAK,OAAA;AAAA,MAC1B,gBAAA;AAAA,MACA,MAAA;AAAA,MACA,OAAA;AAAA,MACA;AAAA,KACF;AAEA,IAAA,IAAI,SAAS,OAAA,EAAS;AACpB,MAAA,IAAA,CAAK,IAAI,yBAAA,EAA2B;AAAA,QAClC,EAAA,EAAI,SAAS,IAAA,EAAM,EAAA;AAAA,QACnB,MAAA,EAAQ,SAAS,IAAA,EAAM;AAAA,OACxB,CAAA;AAAA,IACH;AAEA,IAAA,OAAO,QAAA;AAAA,EACT;AAAA,EAEA,MAAM,SAAA,CACJ,MAAA,EACA,OAAA,EACuC;AACvC,IAAA,IAAA,CAAK,IAAI,sBAAA,EAAwB,EAAE,KAAA,EAAO,MAAA,CAAO,QAAQ,CAAA;AAEzD,IAAA,MAAM,OAAA,GAAU;AAAA,MACd,MAAA,EAAQ,MAAA,CAAO,GAAA,CAAI,CAAA,KAAA,MAAU;AAAA,QAC3B,EAAA,EAAI,KAAA,CAAM,OAAA,CAAQ,KAAA,CAAM,EAAE,IAAI,KAAA,CAAM,EAAA,GAAK,CAAC,KAAA,CAAM,EAAE,CAAA;AAAA,QAClD,IAAA,EAAM,MAAM,IAAA,IAAQ,gBAAA;AAAA,QACpB,SAAS,KAAA,CAAM,OAAA;AAAA,QACf,MAAM,KAAA,CAAM,IAAA;AAAA,QACZ,MAAM,KAAA,CAAM,IAAA;AAAA,QACZ,aAAa,KAAA,CAAM,WAAA;AAAA,QACnB,SAAS,KAAA,CAAM,OAAA;AAAA,QACf,EAAA,EAAI,KAAA,CAAM,EAAA,GAAM,KAAA,CAAM,OAAA,CAAQ,KAAA,CAAM,EAAE,CAAA,GAAI,KAAA,CAAM,EAAA,GAAK,CAAC,KAAA,CAAM,EAAE,CAAA,GAAK,MAAA;AAAA,QACnE,GAAA,EAAK,KAAA,CAAM,GAAA,GAAO,KAAA,CAAM,OAAA,CAAQ,KAAA,CAAM,GAAG,CAAA,GAAI,KAAA,CAAM,GAAA,GAAM,CAAC,KAAA,CAAM,GAAG,CAAA,GAAK;AAAA,OAC1E,CAAE;AAAA,KACJ;AAEA,IAAA,OAAO,IAAA,CAAK,OAAA;AAAA,MACV,iBAAA;AAAA,MACA,MAAA;AAAA,MACA,OAAA;AAAA,MACA;AAAA,KACF;AAAA,EACF;AAAA,EAEA,MAAM,SAAA,CACJ,OAAA,EACA,OAAA,EACqC;AACrC,IAAA,IAAA,CAAK,GAAA,CAAI,sBAAA,EAAwB,EAAE,OAAA,EAAS,CAAA;AAE5C,IAAA,OAAO,IAAA,CAAK,OAAA;AAAA,MACV,oBAAoB,OAAO,CAAA,CAAA;AAAA,MAC3B,KAAA;AAAA,MACA,MAAA;AAAA,MACA;AAAA,KACF;AAAA,EACF;AAAA,EAEA,MAAM,YAAA,CACJ,MAAA,EACA,OAAA,EAUE;AACF,IAAA,IAAA,CAAK,GAAA,CAAI,kBAAA,EAAoB,EAAE,MAAA,EAAQ,CAAA;AAEvC,IAAA,OAAO,IAAA,CAAK,OAAA;AAAA,MACV,0BAAA;AAAA,MACA,MAAA;AAAA,MACA,EAAE,MAAA,EAAO;AAAA,MACT;AAAA,KACF;AAAA,EACF;AAAA,EAEA,MAAM,YACJ,OAAA,EAMG;AACH,IAAA,IAAA,CAAK,IAAI,uBAAuB,CAAA;AAEhC,IAAA,OAAO,IAAA,CAAK,OAAA;AAAA,MACV,mBAAA;AAAA,MACA,KAAA;AAAA,MACA,MAAA;AAAA,MACA;AAAA,KACF;AAAA,EACF;AACF;;;ACvHO,IAAM,kBAAN,MAAsB;AAAA,EACpB,EAAA;AAAA,EACA,KAAA;AAAA,EAEP,YAAY,MAAA,EAAmB;AAC7B,IAAA,IAAI,CAAC,OAAO,eAAA,EAAiB;AAC3B,MAAA,MAAM,IAAI,MAAM,8BAA8B,CAAA;AAAA,IAChD;AAEA,IAAA,IAAA,CAAK,EAAA,GAAK,IAAI,KAAA,CAAM,MAAM,CAAA;AAC1B,IAAA,IAAA,CAAK,KAAA,GAAQ,IAAI,QAAA,CAAS,MAAM,CAAA;AAAA,EAClC;AACF;AAEO,SAAS,sBAAsB,MAAA,EAAoC;AACxE,EAAA,OAAO,IAAI,gBAAgB,MAAM,CAAA;AACnC","file":"index.js","sourcesContent":["import { createOpenAICompatible } from '@ai-sdk/openai-compatible';\nimport { generateText, streamText, type CoreMessage } from 'ai';\nimport type { \n  AICompletionRequest, \n  AICompletionResponse,\n  RequestOptions,\n  ApiResponse,\n  VlyConfig\n} from '../types';\n\nexport class VlyAI {\n  private provider: ReturnType<typeof createOpenAICompatible>;\n  private config: VlyConfig;\n\n  constructor(config: VlyConfig) {\n    this.config = config;\n    this.provider = createOpenAICompatible({\n      name: 'vly-gateway',\n      baseURL: 'https://integrations.vly.ai/v1/llm',\n      headers: {\n        'Authorization': `Bearer ${config.deploymentToken}`,\n      },\n    });\n  }\n\n  private getModel(modelName?: string) {\n    return this.provider(modelName || 'gpt-5');\n  }\n\n  private mapMessages(messages: AICompletionRequest['messages']): CoreMessage[] {\n    return messages.map(msg => ({\n      role: msg.role,\n      content: msg.content,\n    }));\n  }\n\n  async completion(\n    request: AICompletionRequest, \n    _options?: RequestOptions\n  ): Promise<ApiResponse<AICompletionResponse>> {\n    if (this.config.debug) {\n      console.log('[Vly] Creating AI completion', { model: request.model });\n    }\n\n    try {\n      const model = this.getModel(request.model);\n      const messages = this.mapMessages(request.messages);\n\n      const result = await generateText({\n        model: model as any,\n        messages,\n        temperature: request.temperature,\n        maxOutputTokens: request.maxTokens,\n      });\n\n      const responseData: AICompletionResponse = {\n        id: `vly-${Date.now()}`,\n        choices: [{\n          message: {\n            role: 'assistant',\n            content: result.text\n          },\n          finishReason: result.finishReason || 'stop'\n        }],\n        usage: {\n          promptTokens: result.usage?.inputTokens || 0,\n          completionTokens: result.usage?.outputTokens || 0,\n          totalTokens: result.usage?.totalTokens || 0\n        }\n      };\n\n      if (this.config.debug) {\n        console.log('[Vly] AI completion successful', { \n          tokensUsed: responseData.usage.totalTokens \n        });\n      }\n\n      return {\n        success: true,\n        data: responseData\n      };\n    } catch (error: any) {\n      if (this.config.debug) {\n        console.error('[Vly] AI completion failed', { error: error.message });\n      }\n      \n      return {\n        success: false,\n        error: error.message || 'Request failed'\n      };\n    }\n  }\n\n  async streamCompletion(\n    request: AICompletionRequest,\n    onChunk: (chunk: string) => void,\n    _options?: RequestOptions\n  ): Promise<ApiResponse<AICompletionResponse>> {\n    if (this.config.debug) {\n      console.log('[Vly] Creating streaming AI completion', { model: request.model });\n    }\n\n    try {\n      const model = this.getModel(request.model);\n      const messages = this.mapMessages(request.messages);\n\n      const result = await streamText({\n        model: model as any,\n        messages,\n        temperature: request.temperature,\n        maxOutputTokens: request.maxTokens,\n      });\n\n      let fullResponse = '';\n\n      for await (const delta of result.textStream) {\n        fullResponse += delta;\n        onChunk(delta);\n      }\n\n      // Wait for the stream to complete and get usage info\n      const usage = await result.usage;\n\n      const responseData: AICompletionResponse = {\n        id: `vly-stream-${Date.now()}`,\n        choices: [{\n          message: {\n            role: 'assistant',\n            content: fullResponse\n          },\n          finishReason: 'stop'\n        }],\n        usage: {\n          promptTokens: usage?.inputTokens || 0,\n          completionTokens: usage?.outputTokens || 0,\n          totalTokens: usage?.totalTokens || 0\n        }\n      };\n\n      if (this.config.debug) {\n        console.log('[Vly] Streaming AI completion successful', { \n          tokensUsed: responseData.usage.totalTokens \n        });\n      }\n\n      return {\n        success: true,\n        data: responseData\n      };\n    } catch (error: any) {\n      if (this.config.debug) {\n        console.error('[Vly] Streaming AI completion failed', { error: error.message });\n      }\n      \n      return {\n        success: false,\n        error: error.message || 'Streaming request failed'\n      };\n    }\n  }\n\n  async embeddings(\n    input: string | string[],\n    _options?: RequestOptions & { model?: string }\n  ): Promise<ApiResponse<{ embeddings: number[][]; usage: any }>> {\n    if (this.config.debug) {\n      console.log('[Vly] Creating embeddings', { inputCount: Array.isArray(input) ? input.length : 1 });\n    }\n    \n    // Note: AI SDK doesn't have embeddings support for OpenAI-compatible providers yet\n    // This would need to be implemented separately or use a different approach\n    return {\n      success: false,\n      error: 'Embeddings not yet supported with AI SDK OpenAI-compatible provider'\n    };\n  }\n\n  // Helper method to get the provider for direct AI SDK usage\n  getProvider() {\n    return this.provider;\n  }\n}","import type { VlyConfig, RequestOptions, ApiResponse } from './types';\n\nexport class VlyClient {\n  protected config: Required<VlyConfig>;\n\n  constructor(config: VlyConfig) {\n    this.config = {\n      deploymentToken: config.deploymentToken,\n      debug: config.debug || false\n    };\n  }\n\n  protected async request<T = any>(\n    endpoint: string,\n    method: 'GET' | 'POST' | 'PUT' | 'DELETE',\n    data?: any,\n    options?: RequestOptions\n  ): Promise<ApiResponse<T>> {\n    const url = `https://integrations.vly.ai${endpoint}`;\n    const headers: Record<string, string> = {\n      'Authorization': `Bearer ${this.config.deploymentToken}`,\n      'Content-Type': 'application/json',\n      'X-Vly-Version': '0.1.0'\n    };\n\n    const fetchOptions: RequestInit = {\n      method,\n      headers,\n      body: data ? JSON.stringify(data) : undefined,\n    };\n\n    // Add timeout using AbortController\n    const controller = new AbortController();\n    const timeout = options?.timeout || 30000;\n    const timeoutId = setTimeout(() => controller.abort(), timeout);\n    fetchOptions.signal = controller.signal;\n\n    try {\n      const response = await fetch(url, fetchOptions);\n      clearTimeout(timeoutId);\n      \n      const responseData = await response.json().catch(() => ({})) as any;\n\n      if (response.ok) {\n        return {\n          success: true,\n          data: responseData as T,\n          usage: responseData?.usage\n        };\n      } else {\n        const error = responseData?.error || `Request failed with status ${response.status}`;\n        \n        if (this.config.debug) {\n          console.error(`Vly API Error: ${error}`, {\n            endpoint,\n            status: response.status,\n            data: responseData\n          });\n        }\n\n        return {\n          success: false,\n          error\n        };\n      }\n    } catch (error: any) {\n      clearTimeout(timeoutId);\n      const errorMessage = error.name === 'AbortError' ? 'Request timeout' : error.message || 'Unknown error occurred';\n      \n      if (this.config.debug) {\n        console.error(`Vly API Request Failed: ${errorMessage}`, {\n          endpoint,\n          error\n        });\n      }\n\n      if (options?.retries && options.retries > 0) {\n        if (this.config.debug) {\n          console.log(`Retrying request... (${options.retries} retries left)`);\n        }\n        \n        await new Promise(resolve => setTimeout(resolve, 1000));\n        return this.request(endpoint, method, data, { \n          ...options, \n          retries: options.retries - 1 \n        });\n      }\n\n      return {\n        success: false,\n        error: errorMessage\n      };\n    }\n  }\n\n  protected log(message: string, data?: any) {\n    if (this.config.debug) {\n      console.log(`[Vly] ${message}`, data || '');\n    }\n  }\n}","import { VlyClient } from '../client';\nimport type { \n  EmailRequest, \n  EmailResponse,\n  RequestOptions,\n  ApiResponse\n} from '../types';\n\nexport class VlyEmail extends VlyClient {\n  async send(\n    email: EmailRequest, \n    options?: RequestOptions\n  ): Promise<ApiResponse<EmailResponse>> {\n    this.log('Sending email', { \n      to: email.to, \n      subject: email.subject \n    });\n\n    const payload = {\n      to: Array.isArray(email.to) ? email.to : [email.to],\n      from: email.from || 'noreply@vly.io',\n      subject: email.subject,\n      html: email.html,\n      text: email.text,\n      attachments: email.attachments,\n      replyTo: email.replyTo,\n      cc: email.cc ? (Array.isArray(email.cc) ? email.cc : [email.cc]) : undefined,\n      bcc: email.bcc ? (Array.isArray(email.bcc) ? email.bcc : [email.bcc]) : undefined\n    };\n\n    const response = await this.request<EmailResponse>(\n      '/v1/email/send',\n      'POST',\n      payload,\n      options\n    );\n\n    if (response.success) {\n      this.log('Email sent successfully', { \n        id: response.data?.id,\n        status: response.data?.status \n      });\n    }\n\n    return response;\n  }\n\n  async sendBatch(\n    emails: EmailRequest[],\n    options?: RequestOptions\n  ): Promise<ApiResponse<EmailResponse[]>> {\n    this.log('Sending batch emails', { count: emails.length });\n\n    const payload = {\n      emails: emails.map(email => ({\n        to: Array.isArray(email.to) ? email.to : [email.to],\n        from: email.from || 'noreply@vly.io',\n        subject: email.subject,\n        html: email.html,\n        text: email.text,\n        attachments: email.attachments,\n        replyTo: email.replyTo,\n        cc: email.cc ? (Array.isArray(email.cc) ? email.cc : [email.cc]) : undefined,\n        bcc: email.bcc ? (Array.isArray(email.bcc) ? email.bcc : [email.bcc]) : undefined\n      }))\n    };\n\n    return this.request<EmailResponse[]>(\n      '/v1/email/batch',\n      'POST',\n      payload,\n      options\n    );\n  }\n\n  async getStatus(\n    emailId: string,\n    options?: RequestOptions\n  ): Promise<ApiResponse<EmailResponse>> {\n    this.log('Getting email status', { emailId });\n\n    return this.request<EmailResponse>(\n      `/v1/email/status/${emailId}`,\n      'GET',\n      undefined,\n      options\n    );\n  }\n\n  async verifyDomain(\n    domain: string,\n    options?: RequestOptions\n  ): Promise<ApiResponse<{\n    domain: string;\n    verified: boolean;\n    dnsRecords: Array<{\n      type: string;\n      name: string;\n      value: string;\n      verified: boolean;\n    }>;\n  }>> {\n    this.log('Verifying domain', { domain });\n\n    return this.request(\n      '/v1/email/domains/verify',\n      'POST',\n      { domain },\n      options\n    );\n  }\n\n  async listDomains(\n    options?: RequestOptions\n  ): Promise<ApiResponse<Array<{\n    domain: string;\n    verified: boolean;\n    createdAt: string;\n    verifiedAt?: string;\n  }>>> {\n    this.log('Listing email domains');\n\n    return this.request(\n      '/v1/email/domains',\n      'GET',\n      undefined,\n      options\n    );\n  }\n}","import type { VlyConfig } from './types';\nimport { VlyAI } from './ai';\nimport { VlyEmail } from './email';\n\nexport * from './types';\nexport type { AIModel } from './types';\n\n// Re-export AI SDK types for convenience\nexport type { CoreMessage } from 'ai';\n\nexport class VlyIntegrations {\n  public ai: VlyAI;\n  public email: VlyEmail;\n\n  constructor(config: VlyConfig) {\n    if (!config.deploymentToken) {\n      throw new Error('Deployment token is required');\n    }\n\n    this.ai = new VlyAI(config);\n    this.email = new VlyEmail(config);\n  }\n}\n\nexport function createVlyIntegrations(config: VlyConfig): VlyIntegrations {\n  return new VlyIntegrations(config);\n}\n\nexport { VlyAI, VlyEmail };"]}